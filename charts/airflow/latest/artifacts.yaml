name: airflow
repo: bitnami
url: https://charts.bitnami.com/bitnami
chart: bitnami/airflow
version: 23.0.1

dependencies:
  - postgres
  - redis

#resources:
#  configmap:
#    message: "📁 Enter the path to your DAGs folder:"
#    key: dags.existingConfigmap
#    name: "airflow-dags"

prompts:
  - message: "📁 Enter the path to your DAGs folder:"
    key: extraVolumes.0.hostPath.path

executables:
  - name: Fern Key
    command: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
    message: "🔑 Generating a Fernet key for Airflow authentication..."
    key: auth.fernetKey
  - name: Secret Key
    command: openssl rand -base64 32
    message: "🔑 Generating a secret key for WebApp..."
    key: auth.secretKey
  - name: JWT Secret Key
    command: openssl rand -base64 32
    message: "🔑 Generate a JWT secret key for Airflow authentication..."